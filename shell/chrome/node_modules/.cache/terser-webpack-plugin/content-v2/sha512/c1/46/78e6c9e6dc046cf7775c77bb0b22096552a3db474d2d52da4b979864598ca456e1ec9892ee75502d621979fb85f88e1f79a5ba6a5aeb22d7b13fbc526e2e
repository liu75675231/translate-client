{"code":"!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=1)}([,function(t,e){let n=\"\",o={top:0,left:0};var i=\"\",r=\"\";function l(){let t=document.getElementById(\"im1\");t&&(t.style=\"display: none;\")}function c(t){let e=document.getElementById(\"tw-popup\");if(!e){const t=document.createDocumentFragment();e=document.createElement(\"div\"),e.id=\"tw-popup\",t.appendChild(e),document.body.appendChild(t),e.addEventListener(\"mouseup\",(function(t){t.stopPropagation()})),$(e).on(\"click\",\".tw-popup-meaning-word\",(function(t){r=t.target.innerHTML,a(),p()}))}e.style=`top: ${o.top}px; left: ${o.left}px`,console.log(e),function(t,e){chrome.runtime.sendMessage({action:\"ajaxTrans\",type:\"bing\",text:t},(function(t){console.log(t.data);var n=(new DOMParser).parseFromString(t.data,\"text/html\");(t={title:\"\",pronList:[],meaningList:[]}).title=n.querySelector(\".client_def_hd_hd\").innerHTML,n.querySelectorAll(\".client_def_hd_pn\").forEach(e=>{t.pronList.push(e.innerHTML)}),n.querySelector(\".client_def_container\").querySelectorAll(\".client_def_bar\").forEach(e=>{const n=e.querySelector(\".client_def_title\");n&&t.meaningList.push({type:n.innerHTML,wordList:e.querySelector(\".client_def_list_word_bar\").innerHTML.split(\"；\")})}),e(t)}))}(t,(function(t){const n=[];t.pronList.forEach((function(t){n.push(`<div class=\"tw-popup-pron-item\">${t}</div>`)}));const o=[];t.meaningList.forEach((function(t){const e=[];t.wordList.forEach((function(t){e.push(`<div class=\"tw-popup-meaning-word\">${t}</div>`)})),o.push(`\\n                <div class=\"tw-popup-meaning-item\">\\n                    <div class=\"tw-popup-meaning-type\">${t.type}</div>\\n                    <div class=\"tw-popup-meaning-word-list\">${e.join(\"\")}</div>\\n                </div>\\n            `)}));let i=`\\n            <div class=\"tw-popup\">\\n                <div class=\"tw-popup-title\">${t.title}</div>\\n                <div class=\"tw-popup-pron-list\">${n.join(\"\")}</div>\\n                <div class=\"tw-popup-meaning-list\">\\n                    ${o.join(\"\")}\\n                </div>\\n            </div>`;e.innerHTML=i}))}function a(){let t=localStorage.getItem(\"trans-data\"),e=[];t&&(e=JSON.parse(t));var o={text:n,selector:i,targetText:r};e.push(o),localStorage.setItem(\"trans-data\",JSON.stringify(e)),s(o)}function p(){const t=document.getElementById(\"tw-popup\");t&&(t.style=\"display: none;\")}function s(t){if(t)u(t);else{let t=localStorage.getItem(\"trans-data\",\"data\");t&&(t=t&&JSON.parse(t),t.forEach((function(t){u(t)})))}}function u(t){var e=$(t.selector);if(e.length>0){var n=e.html();n=n.replace(t.text,t.text+`<span style=\"background-color: #ff0000; color: #fff;\">（${t.targetText}）</span>`),e.html(n)}}document.addEventListener(\"mouseup\",(function(t){if(\"im1\"===t.target.id)return;const e=function(){if(window.getSelection){var t=window.getSelection();return{text:t.toString(),pos:t.getRangeAt(0).getBoundingClientRect()}}}();if(e.text){let e=[];t.target.classList.forEach((function(t){e.push(\".\"+t)})),i=e.join(\"\");var r=$(i);r.length>0&&r.each((function(e,n){n===t.target&&(i+=`:eq(${e})`)})),o={left:t.pageX,top:t.pageY},function(t){let e=document.getElementById(\"im1\");e||(e=document.createElement(\"img\"),e.src=\"https://shuati-images.oss-cn-beijing.aliyuncs.com/images/logo32.png\",e.id=\"im1\",document.body.appendChild(e),e.addEventListener(\"click\",(function(t){l(),t.stopPropagation(),n&&(c(n),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),l())})));e.style=\"position: absolute; top: \"+t.top+\"px; left: \"+t.left+\"px;\"}(o)}else l();n=e.text,p()})),s()}]);","extractedComments":[]}